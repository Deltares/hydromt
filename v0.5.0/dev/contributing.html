
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Developer’s guide &#8212; HydroMT  documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-deltares.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer’s environment" href="dev_install.html" />
    <link rel="prev" title="Roadmap" href="roadmap.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="light">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/hydromt-logo.jpg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/hydromt-logo.jpg" class="logo__image only-dark" alt="Logo image">
  
  
    <p class="title logo__title">HydroMT Core</p>
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../getting_started/intro.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../user_guide/intro.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api.html">
  API reference
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="intro.html">
  Developments
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../plugins.html">
  Plugins
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/Deltares/hydromt" rel="noopener" target="_blank" title="GitHub"><img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg" class="icon-link-image" alt="GitHub"/></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://www.deltares.nl/en/" rel="noopener" target="_blank" title="Deltares"><img src="../_static/deltares-blue.svg" class="icon-link-image" alt="Deltares"/></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Table of Contents
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../changelog.html">
   What’s new
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="roadmap.html">
   Roadmap
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Developer’s guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dev_install.html">
   Developer’s environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="team.html">
   Contributors
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rights">
   Rights
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#issue-conventions">
   Issue conventions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#git-conventions">
   Git conventions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hydromt-design-conventions">
   HydroMT design conventions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#general">
     General
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data">
     Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#model-class">
     Model Class
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#workflows">
     Workflows
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#code-conventions">
   Code conventions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#naming">
     Naming
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#type-hinting">
     Type hinting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#docstrings">
     Docstrings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#code-format">
     Code format
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#test-and-ci">
   Test and CI
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-the-tests">
     Running the tests
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-release">
   Creating a release
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      

<div class="tocsection editthispage">
    <a href="https://github.com/Deltares/hydromt/edit/main/docs/dev/contributing.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="developer-s-guide">
<span id="contributing"></span><h1>Developer’s guide<a class="headerlink" href="#developer-s-guide" title="Permalink to this heading">#</a></h1>
<p>Welcome to the HydroMT project. All contributions, bug reports, bug fixes,
documentation improvements, enhancements, and ideas are welcome. Here’s how we work.</p>
<section id="rights">
<h2>Rights<a class="headerlink" href="#rights" title="Permalink to this heading">#</a></h2>
<p>The MIT <a class="reference external" href="https://github.com/Deltares/hydromt/blob/docs/LICENSE">license</a> applies to all contributions.</p>
</section>
<section id="issue-conventions">
<h2>Issue conventions<a class="headerlink" href="#issue-conventions" title="Permalink to this heading">#</a></h2>
<p>HydroMT is a relatively new project and highly active. We have bugs, both known and unknown.</p>
<p>The HydroMT <a class="reference external" href="https://github.com/Deltares/hydromt/issues">issue tracker</a> is the place to share any bugs or feature requests you might have.
Please search existing issues, open and closed, before creating a new one.</p>
<p>For bugs, please provide tracebacks and relevant log files to clarify the issue.
<a class="reference external" href="https://stackoverflow.com/help/minimal-reproducible-example">Minimal reproducible examples</a>,
are especially helpful!</p>
</section>
<section id="git-conventions">
<h2>Git conventions<a class="headerlink" href="#git-conventions" title="Permalink to this heading">#</a></h2>
<p>First of all, if git is new to you, here are some great resources for learning Git:</p>
<ul class="simple">
<li><p>the GitHub <a class="reference external" href="https://docs.github.com/en/github/getting-started-with-github/getting-started-with-git">help pages</a>.</p></li>
<li><p>the NumPy’s <a class="reference external" href="http://docs.scipy.org/doc/numpy/dev/index.html">documentation</a>.</p></li>
</ul>
<p>The code is hosted on GitHub. To contribute you will need to sign up for a free
GitHub account. We follow the <a class="reference external" href="https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/github-flow">GitHub workflow</a>
to allow many people to work together on the project.</p>
<p>After discussing a new proposal or implementation in the issue tracker, you can start
working on the code. You write your code locally in a new branch of the HydroMT repo or in a
branch of a fork. Once you’re done with your first iteration, you commit your code and
push to your HydroMT repository.</p>
<p>To create a new branch after you’ve downloaded the latest changes in the project:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git pull
<span class="gp">$ </span>git checkout -b &lt;name-of-branch&gt;
</pre></div>
</div>
<p>Develop your new code while keeping track of the status and differences using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git status
<span class="gp">$ </span>git diff
</pre></div>
</div>
<p>Add and commit local changes, use clear commit messages and add the number of the
related issue to that (first) commit message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git add &lt;file-name OR folder-name&gt;
<span class="gp">$ </span>git commit -m <span class="s2">&quot;this is my commit message. Ref #xxx&quot;</span>
</pre></div>
</div>
<p>Regularly push local commits to the repository. For a new branch the remote and name
of branch need to be added.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git push &lt;remote&gt; &lt;name-of-branch&gt;
</pre></div>
</div>
<p>When your changes are ready for review, you can merge them into the main codebase with a
pull request. We recommend creating a pull request as early as possible to give other
developers a heads up and to provide an opportunity for valuable early feedback. You
can create a pull request online or by pushing your branch to a feature-branch.</p>
</section>
<section id="hydromt-design-conventions">
<h2>HydroMT design conventions<a class="headerlink" href="#hydromt-design-conventions" title="Permalink to this heading">#</a></h2>
<section id="general">
<h3>General<a class="headerlink" href="#general" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>We use <a class="reference internal" href="../user_guide/data_conventions.html#data-convention"><span class="std std-ref">naming and unit conventions</span></a> for frequently used variables to assure consistency within HydroMT</p></li>
</ul>
</section>
<section id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Currently, <a class="reference internal" href="../user_guide/data_types.html#data-types"><span class="std std-ref">these data types</span></a> are supported, but this list can be extended based on demand.</p></li>
<li><p>Input data is defined in the <a class="reference internal" href="../user_guide/data_prepare_cat.html#data-yaml"><span class="std std-ref">data catalog</span></a> and parsed by HydroMT to the associated
Python data type through the DataAdapter class. The goal of this class is to unify the internal representation
of the data (its data type, variables names and units) through minimal preprocessing. When accessing data
from the data catalog with any <code class="docutils literal notranslate"><span class="pre">DataCatalog.get_&lt;data_type&gt;</span></code> method, it is passed through the adapter to
ensure a consistent representation of data within HydroMT. The <cite>get_*</cite> methods take additional arguments to
define a spatial or temporal subset of the dataset.</p></li>
</ul>
</section>
<section id="model-class">
<h3>Model Class<a class="headerlink" href="#model-class" title="Permalink to this heading">#</a></h3>
<p>The HydroMT <a class="reference internal" href="../api.html#model-api"><span class="std std-ref">Model class</span></a> consists of several methods and attributes with specific design/naming conventions.
To implement HydroMT for a specific model kernel/software, a child class named <cite>&lt;Name&gt;Model</cite> (e.g. SfincsModel for Sfincs)
should be created with model-specific data readers, writers and setup methods.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../user_guide/model_main.html#model-interface"><span class="std std-ref">Model data components</span></a> are data attributes which together define a model instance and
are identical for all models. Each component represents a specific model component and is parsed to a specific
Python data object that should adhere to certain specifications. For instance, the <code class="docutils literal notranslate"><span class="pre">staticmaps</span></code> component represent
all static regular grids of a model in a <a class="reference external" href="https://xarray.pydata.org/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2022.6.1.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> object.</p></li>
<li><p>Most model components have an associated <cite>write_&lt;component&gt;</cite> and <cite>read_&lt;component&gt;</cite> method to read/write with model
specific data formats and parse to / from the model component. These methods may have additional optional arguments
(i.e. with default values), but no required arguments. The results component does not have write method.</p></li>
<li><p>To build a model we specify <code class="docutils literal notranslate"><span class="pre">setup_*</span></code> methods which transform raw input data to a specific model variable, for instance
the <cite>setup_soilmaps</cite> method in HydroMT-Wflow to transform soil properties to associated Wflow parameter maps which are part
of the <cite>staticmaps</cite> component.</p></li>
<li><p>All public model methods may only contain arguments which require one of the following basic python types:
string, numeric integer and float, boolean, None, list and dict types. This is requirement makes it possible to
expose these methods and their arguments via a <a class="reference internal" href="../user_guide/model_config.html#model-config"><span class="std std-ref">model config .ini file</span></a>.</p></li>
<li><p>Data is exposed to each model method through the <code class="docutils literal notranslate"><span class="pre">Model.data_catalog</span></code> attribute which is an instance of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">hydromt.DataCatalog</span></code>. Data of <a class="reference internal" href="../user_guide/data_types.html#data-types"><span class="std std-ref">supported data types</span></a> is provided to model methods
by arguments which end with <code class="docutils literal notranslate"><span class="pre">_fn</span></code> (short for filename) which refer to a source in the data catalog
based on the source name or a file based on the (relative) path to the file. Within a model method the data is read
by calling any <code class="docutils literal notranslate"><span class="pre">DataCatalog.get_&lt;data_type&gt;</span></code> method which work for both source and file names.</p></li>
<li><p>The Model class currently contains three high-level methods (<a class="reference internal" href="../_generated/hydromt.Model.build.html#hydromt.Model.build" title="hydromt.Model.build"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build()</span></code></a>,
<a class="reference internal" href="../_generated/hydromt.Model.update.html#hydromt.Model.update" title="hydromt.Model.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update()</span></code></a> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">clip()</span></code> which are common for all model plugins and
exposed through the CLI. This list of methods might be extended going forward.</p></li>
<li><p>The <cite>region</cite> and <cite>res (resolution)</cite> arguments used in the command line <a class="reference internal" href="../user_guide/model_build.html#model-build"><span class="std std-ref">build</span></a>
and <a class="reference internal" href="../user_guide/model_clip.html#model-clip"><span class="std std-ref">clip</span></a> methods are passed to the model method(s) referred in the internal <cite>_CLI_ARGS</cite> model constant, which
in by default, as coded in the Model class, is the <cite>setup_basemaps</cite> method for both arguments. This is typically
the first model method which should be called when building a model.</p></li>
<li><p>A Model child class implementation for a specific model kernel can be exposed to HydroMT as a plugin by specifying a
<code class="docutils literal notranslate"><span class="pre">hydromt.models</span></code> <a class="reference external" href="https://packaging.python.org/en/latest/specifications/entry-points/">entry-point</a> in the pyproject.toml file of a package.
See e.g. the <a class="reference external" href="https://github.com/Deltares/hydromt_wflow/blob/docs/pyproject.toml">HydroMT-Wflow pyproject.toml</a></p></li>
<li><p>We highly recommend writing integration tests which build/update/clip example model instances and check these with previously build instances.</p></li>
</ul>
</section>
<section id="workflows">
<h3>Workflows<a class="headerlink" href="#workflows" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Workflows define (partial) transformations of data from input data to model data. And should, if possible, be kept
generic to be shared between model plugins.</p></li>
<li><p>The input data is passed to the workflow by python data objects consistent with its associated data types
(e.g. <a class="reference external" href="https://xarray.pydata.org/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2022.6.1.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> for regular rasters) and not read by the workflow itself.</p></li>
<li><p>Unit tests should (see below) be written for workflows to ensure these (keep) work(ing) as intended.</p></li>
</ul>
</section>
</section>
<section id="code-conventions">
<h2>Code conventions<a class="headerlink" href="#code-conventions" title="Permalink to this heading">#</a></h2>
<section id="naming">
<h3>Naming<a class="headerlink" href="#naming" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Avoid using names that are too general or too wordy. Strike a good balance between the two.</p></li>
<li><p>Folder and script names are always lowercase and preferably single words (no underscores)</p></li>
<li><p>Python classes are written with CamelCase</p></li>
<li><p>Methods are written with lowercase and might use underscores for readability.
Specific names are used for methods of the Model class and any child classes, see above.</p></li>
<li><p>Names of (global) constants should be all upper case.</p></li>
<li><p>Internal (non-public) constants and methods start with an underscore.</p></li>
</ul>
</section>
<section id="type-hinting">
<h3>Type hinting<a class="headerlink" href="#type-hinting" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>We use <a class="reference external" href="https://docs.python.org/3/library/typing.html">type hinting</a> for arguments and returns of all methods and classes
Check this <a class="reference external" href="https://stackoverflow.com/questions/32557920/what-are-type-hints-in-python-3-5">stack overflow post</a> for more
background about what typing is and how it can be used. In HydroMT we use it specifically to inform external libraries to
about the type arguments of any HydroMT model method. This is work in progress.</p></li>
</ul>
</section>
<section id="docstrings">
<h3>Docstrings<a class="headerlink" href="#docstrings" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>We use the <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">numpy docstring format</a>.
You can easily create these docstring once method arguments have type hints (see above) with
the VSCode <a class="reference external" href="https://github.com/NilsJPWerner/autoDocstring">autoDocstring pluging</a>.</p></li>
</ul>
</section>
<section id="code-format">
<h3>Code format<a class="headerlink" href="#code-format" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>We use the <a class="reference external" href="https://black.readthedocs.io/en/stable/the_black_code_style.html">black code style</a>
for standardized code formatting.</p></li>
<li><p>Make sure the check below returns <em>All done!</em> before commiting your edits.</p></li>
</ul>
<p>To check the formatting of your code:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black --check .
</pre></div>
</div>
<p>To automatically reformat your code:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black .
</pre></div>
</div>
</section>
</section>
<section id="test-and-ci">
<h2>Test and CI<a class="headerlink" href="#test-and-ci" title="Permalink to this heading">#</a></h2>
<p>. We use <a class="reference external" href="https://pytest.org">pytest</a> for testing and <a class="reference external" href="https://docs.github.com/en/actions">github actions</a> for CI.
- Unit tests are mandatory for new methods and workflows and integration tests are highly recommended for various
- All tests should be contained in the tests directory in functions named <cite>test_*</cite>.
- We use <a class="reference external" href="https://app.codecov.io/gh/Deltares/hydromt">CodeCov</a> to monitor the coverage of the tests and aim for high (&gt;90%) coverage. This is work in progress.
- Checkout this <a class="reference external" href="https://levelup.gitconnected.com/a-comprehensive-guide-to-pytest-3676f05df5a0">comprehensive guide to pytests</a> for more info and tips.</p>
<section id="running-the-tests">
<h3>Running the tests<a class="headerlink" href="#running-the-tests" title="Permalink to this heading">#</a></h3>
<p>HydroMT’s tests live in the tests folder and generally match the main package layout.
Test should be run from the tests folder.</p>
<p>To run the entire suite and the code coverage report:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span> tests
<span class="gp">$ </span>python -m pytest --verbose --cov<span class="o">=</span>hydromt --cov-report term-missing
</pre></div>
</div>
<p>A single test file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m pytest --verbose test_rio.py
</pre></div>
</div>
<p>A single test:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m pytest --verbose test_rio.py::test_object
</pre></div>
</div>
</section>
</section>
<section id="creating-a-release">
<h2>Creating a release<a class="headerlink" href="#creating-a-release" title="Permalink to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Prepare the release by bumping the version number in the __init__.py and updating the docs/changelog.rst file</p></li>
<li><p>First create a new release on github under <a class="reference external" href="https://github.com/Deltares/hydromt/releases">https://github.com/Deltares/hydromt/releases</a>. We use semantic versioning and describe the release based on the CHANGELOG.</p></li>
<li><p>Make sure to update and clean your local git folder. This remmoves all files which are not tracked by git.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git pull
<span class="gp">$ </span>git clean -xfd
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Build wheels and sdist for the package and check the resulting files in the dist/ directory.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>flit build
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Then use publish to pypi. It will prompt you for your username and password.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>flit publish --repository pypi
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Bump the version number in __init__.py to the next release number with “.dev” postfix and push commit</p></li>
</ol>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="roadmap.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Roadmap</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="dev_install.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Developer’s environment</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright Deltares.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.1.1.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>